<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Generador de QR</title>
  <!-- Enlaza la hoja de estilos externa -->
  <link rel="stylesheet" href="styles.css" />
  <!-- Librería QR -->
 
	<script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.1/build/qrcode.min.js"></script>
	
</head>
<body>

  <header class="cabecera"><img src="images.png" class="imagen-responsiva" alt=""/>
	</header>
	<h2><center>BIENVENIDOS AL NUEVO SISTEMA DE RECOJO DE CANASTA </center></h2>
	<article class="articulo">Con el fin de brindarles una mejor atención y rapidez en las entrgas de nuestras canastas, ponenmos a disposicion, el nuevo sistema de generación de QR, donde usted podra recoger su canasta únicamente presentando su QR generado.</article>

   
	
<div class="container">
  <form id="formQR" class="formulario">
      <div class="campo">
		  <label for="apellido1">Apellido Paterno:</label>
		<input type="text" style="text-transform: uppercase;" id="paterno">
	  </div>
      <div class="campo"><label for="apellido2">Apellido Materno:</label>
		<input type="text" style="text-transform: uppercase;" id="materno">
	  </div>
      <div class="campo">
		  <label for="nombres">Nombres:</label>
			<input type="text" style="text-transform: uppercase;" id="nombres">
	  </div>
      <div class="campo">
		  <label for="ci">Carnet de identidad:</label>
	<input type="number" id="ci">
	  </div>
	  
	 
	  
	</form>  
	  
      
	   <div class="acciones">
        <button onclick="generarQR()" class="boton">Generar QR</button>
      </div>
	  
      <div id="qr-code"></div>
	  
	    </div> 
	
	 <div class="descarga">
  <a id="descargar" style="display:none;" download="codigo_qr.png" >Descargar QR</a>
		 </div> 
    
  <script>
    function generarQR() {
      const paterno = document.getElementById("paterno").value.trim();
      const materno = document.getElementById("materno").value.trim();
      const nombres = document.getElementById("nombres").value.trim();
      const ci = document.getElementById("ci").value.trim();

      if (!paterno || !materno || !nombres || !ci) {
        alert("Por favor completa todos los campos.");
        return;
      }

      const datos = ` ${paterno}\;${materno}\;${nombres}\;${ci}`;

      const qrCodeDiv = document.getElementById("qr-code");
      qrCodeDiv.innerHTML = ""; // Limpiar contenido anterior

      // Crear un canvas para el código QR
      QRCode.toCanvas(datos, { errorCorrectionLevel: 'H' }, function (err, canvas) {
        if (err) {
          console.error(err);
          alert("Error generando el código QR.");
          return;
        }

        qrCodeDiv.appendChild(canvas);

        // Convertir canvas a imagen y preparar descarga
        const imgData = canvas.toDataURL("image/png");
        const link = document.getElementById("descargar");
        link.href = imgData;
        link.style.display = "inline-block";
        link.textContent = "Descargar QR";
      });
    }
  </script>

</body>
</html>
